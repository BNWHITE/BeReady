<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module BDD - Focus ISEP</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #004E92;
            --primary-dark: #000428;
            --accent: #FFD700;
            --text: #2d3436;
            --bg: #f4f6f8;
            --white: #ffffff;
            --shadow: 0 10px 30px rgba(0,0,0,0.08);
            --radius: 16px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Segoe UI', system-ui, sans-serif; }
        body { background: var(--bg); color: var(--text); padding-bottom: 80px; }

        /* --- HEADER & NAV MOBILE --- */
        .main-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 1rem 1.5rem;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo { font-weight: 900; font-size: 1.4rem; letter-spacing: 1px; display: flex; align-items: center; gap: 10px; }
        .logo i { color: var(--accent); }

        .nav-desktop { display: flex; gap: 20px; }
        .nav-link { color: rgba(255,255,255,0.8); text-decoration: none; font-weight: 600; transition: 0.3s; font-size: 0.95rem; }
        .nav-link:hover, .nav-link.active { color: white; }
        .nav-link.active { border-bottom: 2px solid var(--accent); }

        /* Hamburger Menu (Mobile) */
        .menu-toggle { display: none; font-size: 1.5rem; cursor: pointer; }
        .mobile-menu {
            position: fixed; top: 60px; left: 0; width: 100%; background: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); transform: translateY(-150%); transition: 0.4s;
            padding: 20px; z-index: 99;
        }
        .mobile-menu.open { transform: translateY(0); }
        .mobile-link { display: block; padding: 12px; color: var(--text); text-decoration: none; font-weight: 600; border-bottom: 1px solid #eee; }
        .mobile-link i { width: 25px; color: var(--primary); }

        /* --- HERO SECTION --- */
        .hero {
            background: white;
            padding: 30px 20px;
            text-align: center;
            border-bottom-left-radius: 30px;
            border-bottom-right-radius: 30px;
            box-shadow: var(--shadow);
            margin-bottom: 30px;
        }
        .hero h1 { font-size: 2rem; margin-bottom: 10px; color: var(--primary-dark); }
        .hero p { color: #636e72; max-width: 600px; margin: 0 auto 20px; }
        
        /* --- NAVIGATION TABS --- */
        .tabs-wrapper { display: flex; justify-content: center; gap: 15px; flex-wrap: wrap; margin-bottom: 30px; padding: 0 20px; }
        .tab-btn {
            background: white; border: 2px solid transparent; padding: 12px 25px;
            border-radius: 50px; font-weight: 700; color: #636e72; cursor: pointer;
            transition: 0.3s; box-shadow: 0 4px 10px rgba(0,0,0,0.05); display: flex; align-items: center; gap: 8px;
        }
        .tab-btn.active { background: var(--primary); color: white; box-shadow: 0 8px 20px rgba(0, 78, 146, 0.3); }
        .tab-btn:hover:not(.active) { transform: translateY(-2px); background: #f8f9fa; }

        /* --- CONTENT CARDS --- */
        .container { max-width: 900px; margin: 0 auto; padding: 0 20px; }
        .tab-content { display: none; animation: slideUp 0.4s ease; }
        .tab-content.active { display: block; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* MAPPING SECTION STYLE */
        .mapping-guide { display: grid; gap: 25px; }
        .rule-card {
            background: white; border-radius: var(--radius); overflow: hidden;
            box-shadow: var(--shadow); border: 1px solid rgba(0,0,0,0.05);
        }
        .rule-header {
            background: #f8f9fa; padding: 15px 20px; font-weight: 800; color: var(--primary);
            display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #eee;
        }
        .rule-body { padding: 20px; }
        
        .visual-row { display: flex; align-items: center; justify-content: center; gap: 15px; margin: 20px 0; flex-wrap: wrap; }
        .mcd-entity { border: 2px solid var(--primary); padding: 8px 15px; border-radius: 6px; font-weight: bold; font-size: 0.9rem; }
        .mcd-rel { background: #fff3e0; color: #d35400; padding: 5px 12px; border-radius: 20px; font-size: 0.8rem; border: 1px solid #d35400; font-weight: bold; }
        .arrow-down { text-align: center; font-size: 1.5rem; color: var(--accent); margin: 10px 0; }
        
        .code-box {
            background: #2d3436; color: #dfe6e9; padding: 15px; border-radius: 8px;
            font-family: 'Courier New', monospace; font-size: 0.9rem; line-height: 1.5;
            border-left: 4px solid var(--accent);
        }
        .pk { text-decoration: underline; color: #74b9ff; }
        .fk { color: #fab1a0; font-style: italic; }

        /* EXERCICES STYLE */
        .exo-card { background: white; border-radius: var(--radius); margin-bottom: 25px; box-shadow: var(--shadow); overflow: hidden; }
        .exo-head {
            padding: 20px; background: white; cursor: pointer; display: flex; justify-content: space-between; align-items: center;
            transition: 0.2s; border-bottom: 1px solid #f1f1f1;
        }
        .exo-head:hover { background: #fcfcfc; }
        .exo-title { font-weight: 700; font-size: 1.05rem; display: flex; gap: 10px; align-items: center; }
        .badge { font-size: 0.75rem; padding: 4px 10px; border-radius: 20px; font-weight: 800; text-transform: uppercase; }
        .badge.easy { background: #e0f2f1; color: #00695c; }
        .badge.medium { background: #fff3e0; color: #e65100; }
        .badge.hard { background: #ffebee; color: #c62828; }
        
        .exo-body { padding: 25px; display: none; background: #fafafa; }
        .exo-text { margin-bottom: 20px; line-height: 1.7; color: #444; text-align: justify; }
        
        .btn-action {
            width: 100%; padding: 12px; background: var(--primary); color: white; border: none;
            border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.3s;
            display: flex; justify-content: center; align-items: center; gap: 8px;
        }
        .btn-action:hover { background: var(--primary-dark); }

        .correction-panel {
            margin-top: 20px; border-top: 2px dashed #ddd; padding-top: 20px; display: none;
            animation: fadeIn 0.5s;
        }
        .analysis-block { background: #e3f2fd; padding: 15px; border-radius: 8px; margin-bottom: 15px; font-size: 0.9rem; }
        .analysis-block ul { margin-left: 20px; margin-top: 5px; }

        /* FOOTER MOBILE */
        .bottom-nav {
            display: none; position: fixed; bottom: 0; width: 100%; background: white;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.1); justify-content: space-around; padding: 12px; z-index: 999;
        }
        .bottom-item { text-align: center; color: #b2bec3; font-size: 0.7rem; text-decoration: none; }
        .bottom-item i { display: block; font-size: 1.2rem; margin-bottom: 4px; }
        .bottom-item.active { color: var(--primary); }

        @media (max-width: 768px) {
            .nav-desktop { display: none; }
            .menu-toggle { display: block; }
            .bottom-nav { display: flex; }
            .hero h1 { font-size: 1.6rem; }
            .container { padding-bottom: 20px; }
            .mcd-entity { font-size: 0.8rem; padding: 5px 10px; }
        }
    </style>
</head>
<body>

    <header class="main-header">
        <a href="app_info.html" class="logo"><i class="fas fa-cube"></i> FOCUS BDD</a>
        
        <nav class="nav-desktop">
            <a href="index.html" class="nav-link">Accueil</a>
            <a href="app_info.html" class="nav-link active">APP Info Hub</a>
            <a href="codage.html" class="nav-link">Codage</a>
            <a href="#" class="nav-link" title="Connexion"><i class="fas fa-user-circle"></i></a>
            <a href="#" class="nav-link" id="themeToggle"><i class="fas fa-moon"></i></a>
        </nav>

        <div class="menu-toggle" onclick="toggleMobileMenu()">
            <i class="fas fa-bars"></i>
        </div>
    </header>

    <div id="mobileMenu" class="mobile-menu">
        <a href="index.html" class="mobile-link"><i class="fas fa-home"></i> Accueil</a>
        <a href="app_info.html" class="mobile-link"><i class="fas fa-layer-group"></i> APP Info Hub</a>
        <a href="codage.html" class="mobile-link"><i class="fas fa-code"></i> Fiches Code</a>
        <a href="#" class="mobile-link"><i class="fas fa-user"></i> Connexion</a>
        <a href="#" class="mobile-link"><i class="fas fa-cog"></i> Paramètres</a>
        <a href="#" class="mobile-link" style="border:none;"><i class="fas fa-adjust"></i> Mode Sombre/Clair</a>
    </div>

    <section class="hero">
        <h1><i class="fas fa-database"></i> Entraînement Intensif</h1>
        <p>6 Exercices Types Exam (MCD & Mapping) + Fiches de Révision</p>
        <div class="tabs-wrapper">
            <button class="tab-btn active" onclick="showTab('exos')"><i class="fas fa-pen"></i> Exercices</button>
            <button class="tab-btn" onclick="showTab('mapping')"><i class="fas fa-sitemap"></i> Rappels Mapping</button>
        </div>
    </section>

    <div class="container">
        
        <div id="exos" class="tab-content active">
            
            <div class="exo-card">
                <div class="exo-head" onclick="toggleExo(this)">
                    <div class="exo-title"><span class="badge medium">Moyen</span> #1 Gestion Hôpital</div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="exo-body">
                    <p class="exo-text">
                        Le centre hospitalier est découpé en plusieurs <strong>Services</strong>. Chaque service est dirigé par un unique <strong>Médecin</strong> chef, et un médecin ne peut diriger qu'un seul service. Les médecins sont rattachés à un service principal. Les <strong>Patients</strong> sont admis dans un service à une date donnée. On veut l'historique des admissions.
                    </p>
                    <button class="btn-action" onclick="revealCorr(this)">Voir Analyse & Mapping</button>
                    <div class="correction-panel">
                        <div class="analysis-block">
                            <strong><i class="fas fa-lightbulb"></i> Analyse :</strong>
                            <ul>
                                <li>Chef de Service : Relation (1,1)-(1,1). On choisit de mettre la FK dans Service.</li>
                                <li>Admission : Relation n..n avec attribut "Date". C'est une historique.</li>
                            </ul>
                        </div>
                        <div class="code-box">
                            Service (<span class="pk">code_s</span>, nom, <span class="fk">#id_chef</span>)<br>
                            Medecin (<span class="pk">id_med</span>, nom, <span class="fk">#code_s</span>)<br>
                            Admission (<span class="pk fk">#id_pat</span>, <span class="pk fk">#code_s</span>, <span class="pk">date_entree</span>)
                        </div>
                    </div>
                </div>
            </div>

            <div class="exo-card">
                <div class="exo-head" onclick="toggleExo(this)">
                    <div class="exo-title"><span class="badge hard">Difficile</span> #2 Bibliothèque & Exemplaires</div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="exo-body">
                    <p class="exo-text">
                        Une bibliothèque gère des <strong>Œuvres</strong> (ex: Harry Potter). Une œuvre a plusieurs <strong>Exemplaires</strong> physiques. Une œuvre est écrite par plusieurs <strong>Auteurs</strong>. Un <strong>Abonné</strong> emprunte un exemplaire précis (pas l'œuvre abstraite) à une date donnée.
                    </p>
                    <button class="btn-action" onclick="revealCorr(this)">Voir Analyse & Mapping</button>
                    <div class="correction-panel">
                        <div class="code-box">
                            Oeuvre (<span class="pk">isbn</span>, titre)<br>
                            Exemplaire (<span class="pk">id_ex</span>, etat, <span class="fk">#isbn</span>)<br>
                            Ecrire (<span class="pk fk">#id_auteur</span>, <span class="pk fk">#isbn</span>)<br>
                            Emprunter (<span class="pk fk">#id_abonne</span>, <span class="pk fk">#id_ex</span>, <span class="pk">date_emprunt</span>)
                        </div>
                    </div>
                </div>
            </div>

            <div class="exo-card">
                <div class="exo-head" onclick="toggleExo(this)">
                    <div class="exo-title"><span class="badge hard">Piège</span> #3 Projets & Consultants</div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="exo-body">
                    <p class="exo-text">
                        Un <strong>Consultant</strong> travaille sur un <strong>Projet</strong> pour un <strong>Client</strong>. Le tarif journalier dépend spécifiquement de ces trois éléments réunis (ex: Alice sur le Projet Web pour Coca-Cola coûte 500€, mais Alice sur le Projet Web pour Pepsi coûte 600€).
                    </p>
                    <button class="btn-action" onclick="revealCorr(this)">Voir Analyse & Mapping</button>
                    <div class="correction-panel">
                        <div class="analysis-block">
                            C'est une <strong>Association Ternaire</strong>. Si on sépare en binaires, on perd la connexion du prix.
                        </div>
                        <div class="code-box">
                            Mission (<span class="pk fk">#id_consultant</span>, <span class="pk fk">#id_projet</span>, <span class="pk fk">#id_client</span>, tarif)
                        </div>
                    </div>
                </div>
            </div>

             <div class="exo-card">
                <div class="exo-head" onclick="toggleExo(this)">
                    <div class="exo-title"><span class="badge medium">Technique</span> #4 Nomenclature (Vélo)</div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="exo-body">
                    <p class="exo-text">
                        On gère des <strong>Pièces</strong>. Une pièce peut être composée d'autres pièces (ex: une Roue est composée de Rayons et d'une Jante). On doit stocker la quantité nécessaire pour la composition.
                    </p>
                    <button class="btn-action" onclick="revealCorr(this)">Voir Analyse & Mapping</button>
                    <div class="correction-panel">
                        <div class="analysis-block">
                            C'est une <strong>Réflexive n..n</strong>. Une pièce est "Père" et "Fils" à la fois.
                        </div>
                        <div class="code-box">
                            Piece (<span class="pk">ref_piece</span>, libelle)<br>
                            Composition (<span class="pk fk">#ref_compose</span>, <span class="pk fk">#ref_composant</span>, qte)<br>
                            <span style="color:#888">// Les 2 FK pointent vers la table Piece</span>
                        </div>
                    </div>
                </div>
            </div>

             <div class="exo-card">
                <div class="exo-head" onclick="toggleExo(this)">
                    <div class="exo-title"><span class="badge easy">Classique</span> #5 Agence Immo (0..1)</div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="exo-body">
                    <p class="exo-text">
                        Une agence gère des <strong>Biens</strong>. Un bien se trouve dans une <strong>Ville</strong>. Un bien est géré par un <strong>Agent</strong>, mais parfois un bien n'a pas encore d'agent (nouveau dossier).
                    </p>
                    <button class="btn-action" onclick="revealCorr(this)">Voir Analyse & Mapping</button>
                    <div class="correction-panel">
                        <div class="analysis-block">
                            La relation Bien-Agent est (0,1). La clé étrangère est dans Bien, mais elle accepte NULL.
                        </div>
                        <div class="code-box">
                            Bien (<span class="pk">id_bien</span>, prix, <span class="fk">#code_ville</span>, <span class="fk">#id_agent NULL</span>)
                        </div>
                    </div>
                </div>
            </div>

             <div class="exo-card">
                <div class="exo-head" onclick="toggleExo(this)">
                    <div class="exo-title"><span class="badge hard">Exam</span> #6 Uber Eats (Complet)</div>
                    <i class="fas fa-chevron-down"></i>
                </div>
                <div class="exo-body">
                    <p class="exo-text">
                        Un <strong>Client</strong> passe une <strong>Commande</strong>. La commande contient plusieurs <strong>Plats</strong> avec une quantité. La commande est livrée par un unique <strong>Livreur</strong>.
                    </p>
                    <button class="btn-action" onclick="revealCorr(this)">Voir Analyse & Mapping</button>
                    <div class="correction-panel">
                        <div class="code-box">
                            Commande (<span class="pk">id_cmd</span>, date, <span class="fk">#id_client</span>, <span class="fk">#id_livreur</span>)<br>
                            Contenir (<span class="pk fk">#id_cmd</span>, <span class="pk fk">#id_plat</span>, qte)
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div id="mapping" class="tab-content">
            <div class="mapping-guide">
                
                <div class="rule-card">
                    <div class="rule-header">1. La Règle du Père et du Fils (1..n)</div>
                    <div class="rule-body">
                        <p>C'est la règle la plus courante (90% des cas).<br><strong>"La clé migre vers celui qui a le 1,1"</strong>.</p>
                        
                        <div class="visual-row">
                            <div class="mcd-entity">CLIENT (0,n)</div>
                            <div class="mcd-rel">PASSER</div>
                            <div class="mcd-entity">COMMANDE (1,1)</div>
                        </div>
                        <div class="arrow-down"><i class="fas fa-arrow-down"></i></div>
                        <div class="code-box">
                            Client (<span class="pk">id_client</span>, nom)<br>
                            Commande (<span class="pk">id_cmd</span>, date, <span class="fk">#id_client</span>)
                        </div>
                    </div>
                </div>

                <div class="rule-card">
                    <div class="rule-header">2. La Règle de la Jointure (n..n)</div>
                    <div class="rule-body">
                        <p>Quand il y a "Plusieurs" des deux côtés.<br><strong>"Création d'une nouvelle table"</strong>.</p>
                        
                        <div class="visual-row">
                            <div class="mcd-entity">ETUDIANT (0,n)</div>
                            <div class="mcd-rel">SUIVRE (note)</div>
                            <div class="mcd-entity">COURS (0,n)</div>
                        </div>
                        <div class="arrow-down"><i class="fas fa-arrow-down"></i></div>
                        <div class="code-box">
                            Suivre (<span class="pk fk">#id_etudiant</span>, <span class="pk fk">#id_cours</span>, note)
                        </div>
                    </div>
                </div>

                <div class="rule-card">
                    <div class="rule-header">3. La Règle de la Fusion (1..1)</div>
                    <div class="rule-body">
                        <p>Rare. Un Stade a 1 Adresse, Une Adresse est pour 1 Stade.<br><strong>"Tout dans la même table"</strong>.</p>
                        <div class="code-box">
                            Stade (<span class="pk">id</span>, nom, rue, ville, cp)
                        </div>
                    </div>
                </div>

            </div>
        </div>

    </div>

    <nav class="bottom-nav">
        <a href="index.html" class="bottom-item"><i class="fas fa-home"></i>Accueil</a>
        <a href="app_info.html" class="bottom-item active"><i class="fas fa-database"></i>BDD</a>
        <a href="codage.html" class="bottom-item"><i class="fas fa-code"></i>Code</a>
        <a href="#" class="bottom-item"><i class="fas fa-user"></i>Profil</a>
    </nav>

    <script>
        // Gestion des Onglets
        function showTab(id) {
            document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            // Trouver le bouton correspondant via event.target ou une logique simple
            const btns = document.querySelectorAll('.tab-btn');
            if(id === 'exos') btns[0].classList.add('active');
            if(id === 'mapping') btns[1].classList.add('active');
        }

        // Menu Mobile
        function toggleMobileMenu() {
            document.getElementById('mobileMenu').classList.toggle('open');
        }

        // Accordéon Exos
        function toggleExo(element) {
            const body = element.nextElementSibling;
            const icon = element.querySelector('.fa-chevron-down');
            
            if (body.style.display === "block") {
                body.style.display = "none";
                element.style.background = "white";
                icon.style.transform = "rotate(0deg)";
            } else {
                body.style.display = "block";
                element.style.background = "#fcfcfc";
                icon.style.transform = "rotate(180deg)";
            }
        }

        // Révéler correction
        function revealCorr(btn) {
            const panel = btn.nextElementSibling;
            panel.style.display = "block";
            btn.style.display = "none";
        }
    </script>
</body>
</html>
